<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <link href="https://fonts.googleapis.com/css?family=Ubuntu" rel="stylesheet">

        <title>tcp&amp;ip-tcp怎么保证可靠传输</title>

        <link rel="stylesheet" href="/css/stylesheet.css">
    </head>
    <body>
        <section id="page-title">
            <h1><a href="/">nber1994</a></h1>
        </section>



<section class="blog-post">
    <h1>tcp&amp;ip-tcp怎么保证可靠传输</h1>
    <div class="blog-post-subheader">
        August 9, 2019
    </div>
    <div class="blog-post-content">
        <h1 id="tcpip-tcp怎么保证可靠传输">tcp&amp;ip-tcp怎么保证可靠传输</h1>
<ol>
<li>确认机制和超时重传
<ul>
<li>收到消息后会恢复ack来确认到达，如果一段时间后未收到ack则会重传</li>
</ul>
</li>
<li>数据校验和
<ul>
<li>tcp的报文头有校验和，校验是否损坏</li>
</ul>
</li>
<li>排序
<ul>
<li>接收方会根据顺序来进行排序，将先到的数据缓存起来，等待之前的包到达后才发送给应用</li>
</ul>
</li>
<li>流量控制
<ul>
<li>可以根据接收方的接收能力来调整滑动窗口的大小</li>
</ul>
</li>
<li>拥塞控制
<ul>
<li>当网络情况不好的时候，可以调整滑动窗口的大小来防止丢包</li>
</ul>
</li>
</ol>
<h2 id="延伸">延伸</h2>
<ul>
<li>拆包和粘包</li>
<li>拆包就是说，发送方一次发送的数据，接收方可能两次才能收到
<ul>
<li>发送的大小大于了IP包的大小</li>
<li>发送过急，大于发送缓冲区剩余大小</li>
</ul>
</li>
<li>粘包，接收方读取一次数据，接收到了发送方两次发送的内容
<ul>
<li>发送缓冲区未满，一次将多个包发出</li>
<li>接收太慢，缓冲区满了，一次读取多个包</li>
</ul>
</li>
<li>解决方案
<ul>
<li>为每个包增加长度信息</li>
<li>将所有的包封装为固定长度</li>
<li>包之间设置边界</li>
</ul>
</li>
</ul>

    </div>
</section>

    </body>
</html>